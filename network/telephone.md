---
layout: page
title: 電話
---

* PSTN (Public Switched Telephone Network)
    * 目標: 人間の声を多かれ少なかれ認識できる形で送信する
* 固定電話のおいたち
    * 1876年: Alexander Graham Bell が電話の特許を取得。
    * 初期の電話は、電話機と電話機を直接ケーブルで繋ぐ。 n個の電話機があれば、 n(n+1)/2 本 のケーブルが必要。
    * 1878年: 最初の交換局（コネチカット州ニューヘブン）を開設したベル電話会社を設立。
    * 交換局は各顧客の家または事務所に有線で接続しており、電話をかける人は呼び出し音を鳴らし、気づいたオペレーターが、ジャンパーケーブルを使用して発信者を着信者に手動で接続する。
    * ひとつの交換局がすべての顧客と接続する必要が出てきた。
    * 交換局と交換局を繋いで、遠距離通話を可能とした。
    * AT&Tの資本価値の80％は、ローカルループの銅線で AT&Tは、事実上、世界最大の銅山だった。
* 携帯電話のおいたち
    * 最初のモバイルシステムは、AT＆Tで考案された。  FCC (Federal Communication Commission) が全国にルールづけした。
    * 結果として、米国全体で単一のアナログシステムとなり、異なる場所に行っても同様に使えた。
    * しかし、携帯電話がヨーロッパに導入された時は、各国が独自のシステムを考案して、大失敗となった。
    * ヨーロッパはデジタルが登場後、政府が運営するPTTが集まり、単一システム (GSM: Global System for Mobile communications) で標準化した。 ヨーロッパの携帯電話はヨーロッパのどこでも機能するようになった。
    * 米国は政府が標準化ビジネスに参加すべきではないと決定したので、さまざまな機器メーカーがさまざまな種類の携帯電話を製造できた。 その結果、米国では2つの非互換の電話システムが誕生した。
    * 米国がリードしたが、ヨーロッパの方が携帯電話は広い市場となった。
        * 理由
            * 米国は着信者払い、ヨーロッパは発信者払い
            * プリペイドカードの普及。たまにしか使わない人は月額料金を払わなくて良い。


## キーワード

* end office, local central office
    * 電話会社の最寄りのオフィス
* local loop
    * 交換局と顧客をつなぐ2本のワイヤ 

## モバイル電話世代

| Name | Characteristic |
|:--|:--|
| 1G | アナログ音声 |
| 2G | デジタル音声 |
| 3G | デジタル音声とデータ |

### 1G : Analog voice

* 1946年、セントルイスに自動車ベースの電話用の最初のシステムが設置された。 
    * 高層ビルの上に1つの大きなトランスミッタを配置し、単一チャネルを送信と受信に利用していた。
    * 話すためには、送信機を有効にし、受信機を無効にするボタンを押す。
    * push-to-talk system として知られるこのシステムは、1950年代後半からいくつかの都市に設置された。 
    * CBラジオ、タクシー、パトカーがこの技術をよく使用する。
* 1960年台, IMTS (Improved Mobile Telephone System, 改良型携帯電話システム) が設置された.
    * 丘の上に高出力（200ワット）のトランスミッタを配置。
    * 送信用と受信用の2つの周波数があり、push-to-talk ボタンは不要となった。
    <!--* 携帯電話からのすべての通信は、発信信号とは異なるチャネルで着信したため、モバイルユーザーはお互いの声を聞くことができない???-->
    * 150MHzから450MHzまでの23チャネルをサポート。
    * チャネル数が少ないため、ユーザーはダイヤルトーンを受信するまでに長時間待つことがよくあった。
    * 丘の上の送信機の電力が大きく、干渉を避けるために隣接するシステムを数百km離す必要があった。
    * 全体の容量が限られており、システムは実用的ではなかった。
* 1982年、ベル研究所が AMPS (Advanced Mobile Phone System) を発明。
    * アメリカが最初に導入。
    * 英国では TACS, 日本では MCS-L1 と呼ばれる。
    * 2008年に廃止された。
* 2G, 3G への発展
    * Cell
        * すべての携帯電話システムでは、地理的領域をセルに分割するため、デバイスは cell phone とも呼ばれる。
        * AMPSでは、セルの幅は通常10〜20km。デジタルシステムでは、セルは小さくなる。
        * 各セルは、隣接するセルでは使用されない周波数のセットを使用する。
        * 前のシステムよりもはるかに大きな容量を与える重要なアイデア
            * 比較的小さなセルを使用し、近くの隣接していないセルで送信周波数を再利用する
            * 直径100kmのIMTSシステムは各周波数で1回の呼び出ししかできない
            * AMPSシステムは直径100kmに100個の10kmセルを持ち、広く離れたセルで各周波数で10〜15回の呼び出しが可能。
        * セルが小さくなるにつれて、システム容量が最低1桁増加する。
        * セルが小さいほうが、必要な電力が少なく、送信機とハンドセットがより小さく安価となる。
        * システムが過負荷になるまでユーザー数が増加した領域
            * 電力を削減し、過負荷のセルをより小さなマイクロセルに分割して、より多くの周波数を再利用する。
                * 例
                    * スポーツイベント、ロックコンサート、および多数のモバイルユーザーが数時間集まるその他の場所で衛星リンクを備えたポータブルタワーを使用して、一時的なマイクロセルを作成する。
        * 常に、各携帯電話は論理的に1つの特定のセルにあり、そのセルの基地局の制御下にある。
        * ハンドオフ
            * プロセス
                1. 携帯電話が物理的にセルを離れると、その基地局は電話の信号が消えていくのに気づき、周囲のすべての基地局に電話からどれだけのパワーを受信しているか問い合わせる。 
                1. 応答が返されると、基地局はその携帯電話の所有権を、一番強いシグナルを受信していると応答したセルに移す。(ほとんどの条件下で、それは電話が現在配置されているセルとなる。)
                1. 次に、電話に新しい基地局が通知される。 通話が進行中の場合は、携帯電話は新しいチャネルに切り替えるよう要求される（古いチャネルは隣接するセルでは使えない）。
            * 一連のプロセスには約300ミリ秒かかる。
        * 基地局
            * 交換手の役目をするもの(用語)
                * MSC (Mobile Switching Center, モバイルスイッチングセンター)
                * MTSO (モバイル電話スイッチングオフィス, Mobile Telephone Swhitching Office)
            * 各セルの中央には、セル内のすべての電話が送信する基地局がある。
            * 基地局は、アンテナに接続されたコンピュータと送信機/受信機で構成されている。
            * 小規模なシステムでは、すべての基地局が MSC または MTSO と呼ばれる単一のデバイスに接続する。
            * 大きな MSC では、複数の MSC が必要になる場合があり、それらはすべて第2レベルの MSC に接続する。(階層構造)
            * MSCは、基本的に電話システムと同様にエンドオフィスで、少なくとも1つの電話システムエンドオフィスに接続されている。
            * MSCは、パケット交換ネットワークを使用して、基地局、相互、および PSTN (Public Switched Telephone Network) と通信する。
            * チャネルの割り当ては、MSCによって行われる。
            * 基地局アンテナ
                * 空中の高い場所を見つけることが重要。
                    * 一部の通信事業者はローマカトリック教会との提携を築いた
                        * ローマカトリック教会は世界中に多数の高貴なアンテナ用の場所を所有していて、すべてが統一的に管理されている。
    * Channel
        * FDM (Frequency Division Multiplexing, 周波数分割多重)
            * 多数の異なる信号を送る際に、それぞれの信号ごとに周波数帯域を変化させる
        * FDD (Frequency Division Duplex, 周波数分割複信)
            * 通信に用いる周波数帯を半分に分割して、送信と受信に別々の周波数を使用して通信を行う
            * 周波数帯を半分に分割するため、周波数帯利用効率は高くない
        * AMPSはFDMを使用してチャネルを分離する。
        * システム構成 FDD
            * 832の全二重チャネル
            * 各チャネルは1対のシンプレックスチャネル 
            * 824-849 MHz の 832 のシンプレックスチャネル: モバイルから基地局への伝送に使用
            * 869-894 MHz の 832 のシンプレックスチャネル: 基地局からモバイルへの伝送に使用
            * これらの 832 の シンプレックスチャネル はそれぞれ30kHz幅に刻まれている。
            * 832チャネルは4つのカテゴリに分類される
                * 制御チャネル（基地局からモバイル）
                    * システムの管理に使用
                * ページングチャネル（基地局からモバイル）
                    * モバイルユーザーを呼び出すために使用
                * アクセスチャネル（双方向）
                    * 通話のセットアップ、チャネルの割り当てに使用
                * データチャネル（双方向）
                    * 音声、ファックス、またはデータの伝送に使用
            * 同じ周波数は近くのセルでは使えず、各セルで21チャネルが制御用に予約されているため、セルごとに使用できる実際の音声チャネル数は832よりはるかに少なく、通常は約45。
    * 電話管理
        * AMPSの各携帯電話には、 programmable な読み取り専用メモリに 32 bit の serial number, 10桁の電話番号が付与されている。
        * 電話番号は、10 bit の 3桁 の市外局番と 24 bit の7桁の加入者番号として表される。
        * 電話機の挙動
            1. 電源がオンになると、21の制御チャネルのうち、事前にプログラムされたリストをスキャンして、最も強力な信号を見つける。
            1. 32ビットのシリアル番号と34ビットの電話番号をブロードキャストする。 
                * AMPSのすべての制御情報と同様に、このパケットは、音声チャネル自体がアナログであっても、デジタル形式で複数回、エラー訂正コードとともに送信される。
            1. 基地局はアナウンスを受信するとMSCに通知する。
            1. MSCは、新しい顧客の存在を記録し、顧客の自宅のMSCに現在地を通知する。(時代によって異なるが、調べでは、携帯電話は約15分に1回再登録される。)
            1. 電話をかけるには、モバイルユーザーが電話のスイッチを入れ、キーパッドで電話をかける番号を入力し, 発信ボタンを押す。
            1. 電話機は、呼び出される番号と自身のIDをアクセスチャネルに送信する。 衝突が発生した場合は、後で再試行する。
            1. 基地局は要求を受け取るとMSCに通知する。
            1. 発信者がMSCの会社（またはそのパートナー）の顧客の場合、MSCは通話のアイドルチャネルを探す。
            1. アイドルチャネルが見つかったら、チャネル番号を制御チャネルに送り返す。
            1. 携帯電話は自動的に選択された音声チャネルに切り替わり、着信側が電話に出るまで待機する。
        * 着信した電話機の挙動
            * アイドル状態の電話
                1. ページングチャネルを継続的にリッスンして、自分宛てのメッセージを検出する。
                    * 携帯電話に電話をかけると、パケットが着信者の自宅のMSCに送信され、どこにあるかがわかる。
                1. パケットが現在のセルの基地局に送信され、基地局がページングでブロードキャストで 特定の携帯電話が存在するかどうかを問い合わせる。1. 呼び出された電話は、アクセスチャネルで応答する。
                1. 基地局は電話機に対して、切り替え先のチャネルを伝える。
                1. 着信した電話は指定されたチャネルに切り替わって、呼び出し音を鳴らし始める <!--（または所有者が誕生日プレゼントとして与えられたメロディーを演奏します）。-->

### 2G : Digital Voice

* デジタルに切り替わった利点
    * 圧縮できる -> 容量増える。
    * 音声信号と制御信号を暗号化でき、セキュリティが向上する。 => 詐欺・盗聴対策
    * テキストメッセージが可能となる。
* 世界的な標準化はなかった。 3種類ほどが広く使用されている。
    * DAMPS (Digital Advanced Mobile Phone System)
        * AMPSと共存し、TDMを使用して同じ周波数チャネルで複数の通話を発信するAMPSのデジタルバージョン。
        * 国際規格IS-54およびその後継のIS-136で説明されている。
    * GSM (The Global System for Mobile communications)
        * 米国での普及は遅かったが、現在では世界中のほぼすべての場所で使用されている。
        * DAMPSと同様に、 GSMはFDMとTDMの組み合わせに基づいている。
    * CDMA
        * 国際標準 IS-95 で説明されている
        * DAMPS, GSM とはまったく異なる種類のシステム。
        * FDM や TDM を使用しない。 
        *　主要な2Gシステムにはならなかったが、3Gシステムの基盤となった。
* PCS (Personal Communications Services)
    * マーケティング資料で第2世代（デジタル）システムを示すために使用されることがある。
    * もともとは1900MHz帯の携帯電話を意味していた。
* TDM (Time Division Multiplexing).

#### GSM

* おいたち
    * 1980年代に誕生
        * 目的: 単一のヨーロッパの2G規格を作成する
        * フランス語で Groupe Speciale´Mobile と呼ばれる電気通信グループが取り組んだ。
    * 1991年
        * 最初のGSMシステムが導入された。 すぐに成功した。
    * 世界的にも普及できること明らかとなり、GSMはより世界的にアピールするように名前が変更された。
* GSM の規格は 5000ページを超える。
    * 大部分は、システムのエンジニアリングの側面、特にマルチパス信号伝搬を処理する受信機の設計、および送信機と受信機の同期
* コンポーネント
    * 携帯電話端末は電話機器とSIMカードに分かれる。
        * SIM (Subscriber Identity Module) カード
            * 加入者とアカウント情報を備えた removable chip
            * 会話を暗号化するためのシークレットを含む
            * 異なる電話機器にセットすれば、その電話機器から電話をかけられる。
    * セル基地局
        * セルの無線リソースを制御
        * ハンドオフを処理する BSC (Base Station Controller) に接続されている。
    * BSC
        * AMPS のように、 MSC に接続されている
    * MSC
        * 通話をルーティング
            * 携帯電話がどこにあるかは、 VLR (Visitor Location Registor) を使う
                * VLR: 管理するセルに関連づけられてた、周辺の携帯電話のデータベース
        * PSTN (Public Switched Telephone Network) に接続する
    * HLR (Home Location Register)
        * 各モバイルが最後に認識された場所を保持するデータベース
        * 着信コールを適切な場所にルーティングするために使用される。
    * モバイルがセルからセルに移動するときは、VLR, HLR を最新の状態に保つ必要がある。

